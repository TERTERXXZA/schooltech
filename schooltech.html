<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>SchoolTech Learn | ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏∏‡∏•‡∏°‡∏ì‡∏µ‡∏≠‡∏∏‡∏ó‡∏∏‡∏°‡∏û‡∏£‡∏û‡∏¥‡∏™‡∏±‡∏¢</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{margin:0;font-family:Tahoma;background:#f4f6f8}

/* ===== LOGIN ===== */
.container{display:flex;height:100vh}
.left{
  width:45%;background:#1e88e5;color:white;
  padding:40px;display:flex;flex-direction:column;justify-content:center
}
.right{
  width:55%;background:white;
  display:flex;justify-content:center;align-items:center
}
.box{width:360px}
input,button{
  width:100%;padding:10px;margin:6px 0;font-size:14px
}
button{background:#1e88e5;color:white;border:none;cursor:pointer}
button:hover{opacity:0.9}
a{color:#1e88e5;cursor:pointer}
.hidden{display:none}
.error{color:red;font-size:14px}

/* ===== MENU ===== */
nav{
  background:#6a1b9a;
  color:white;
  display:flex;
  padding:0 30px;
  align-items:center
}
nav .logo{font-size:20px;font-weight:bold;margin-right:30px}
nav ul{list-style:none;display:flex;margin:0;padding:0}
nav ul li{position:relative}
nav ul li a{
  display:block;padding:18px 20px;color:white;text-decoration:none
}
nav ul li:hover{background:#7b1fa2}
.dropdown{
  display:none;position:absolute;top:55px;left:0;
  background:#333;width:300px;z-index:999
}
.dropdown a{
  display:block;padding:12px;border-bottom:1px solid #444
}
.dropdown a:hover{background:#555}
nav ul li:hover .dropdown{display:block}

/* ===== DASHBOARD ===== */
#dashboard{display:none}
.content{padding:30px}
.card{
  background:white;padding:25px;border-radius:10px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);margin-bottom:20px
}
</style>
</head>

<body>

<!-- ===== LOGIN PAGE ===== -->
<div class="container" id="loginPage">

<div class="left">
  <h1>‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</h1>
  <h2>‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏∏‡∏•‡∏°‡∏ì‡∏µ‡∏≠‡∏∏‡∏ó‡∏∏‡∏°‡∏û‡∏£‡∏û‡∏¥‡∏™‡∏±‡∏¢</h2>
  <p>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: 045-965202</p>
  <hr>
  <p>üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</p>
  <a href="https://chullamanee.ac.th/web/" target="_blank" style="color:white">
    ‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢
  </a>
</div>

<div class="right">
<div class="box">

<!-- LOGIN -->
<div id="loginBox">
<h2>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<p id="errorMsg" class="error"></p>
<button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ? <a onclick="showRegister()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a></p>
</div>

<!-- REGISTER -->
<div id="registerBox" class="hidden">
<h2>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h2>
<input id="rEmail" placeholder="Email">
<input id="citizen" placeholder="‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô">
<input id="studentId" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤">
<input id="rPassword" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
<input id="rPassword2" type="password" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
<button onclick="register()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>
<a onclick="showLogin()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</a>
</div>

</div>
</div>
</div>

<!-- ===== DASHBOARD ===== -->
<div id="dashboard">

<nav>
  <div class="logo">SchoolTech Learn</div>
  <ul>
    <li>
      <a href="#">‡πÅ‡∏ú‡∏ô‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤</a>
      <div class="dropdown">
        <a href="#">‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</a>
        <a href="#">‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</a>
        <a href="#">‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</a>
        <a href="#">‡∏Å‡∏≤‡∏£‡∏ï‡∏•‡∏≤‡∏î</a>
        <a href="#">‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á</a>
        <a href="#">‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</a>
        <a href="#">‡∏ä‡πà‡∏≤‡∏á‡∏¢‡∏ô‡∏ï‡πå</a>
        <a href="#">‡∏ä‡πà‡∏≤‡∏á‡∏Å‡∏•‡πÇ‡∏£‡∏á‡∏á‡∏≤‡∏ô</a>
      </div>
    </li>

    <li>
      <a href="#">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</a>
      <div class="dropdown">
        <a href="#">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
        <a href="#">‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏Å‡∏£‡∏î</a>
        <a href="#">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
      </div>
    </li>

    <li>
      <a href="#">‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£</a>
      <div class="dropdown">
        <a href="https://chullamanee.ac.th/web/" target="_blank">‡∏Ç‡πà‡∏≤‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</a>
      </div>
    </li>

    <li><a onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a></li>
  </ul>
</nav>

<div class="content">
  <div class="card">
    <h2 id="nameShow"></h2>
    <p>‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤: <span id="sidShow"></span></p>
    <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="scoreShow"></span></p>
    <p>‡πÄ‡∏Å‡∏£‡∏î: <span id="gradeShow"></span></p>
    <button onclick="checkIn()">‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</button>
    <button onclick="checkOut()">‡∏≠‡∏≠‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</button>
  </div>
</div>

</div>

<script>
// üî• Firebase Config (‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
firebase.initializeApp({
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID"
});

const auth = firebase.auth();
const db = firebase.firestore();

// UI
function showRegister(){
  loginBox.classList.add("hidden");
  registerBox.classList.remove("hidden");
}
function showLogin(){
  registerBox.classList.add("hidden");
  loginBox.classList.remove("hidden");
}

// LOGIN (‡πÅ‡∏Å‡πâ Error ‡πÅ‡∏•‡πâ‡∏ß)
function login(){
  document.getElementById("errorMsg").innerText = "";
  auth.signInWithEmailAndPassword(email.value,password.value)
  .then(loadDashboard)
  .catch(()=>{
    document.getElementById("errorMsg").innerText =
      "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á";
  });
}

// REGISTER
function register(){
  if(rPassword.value !== rPassword2.value)
    return alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");

  auth.createUserWithEmailAndPassword(rEmail.value,rPassword.value)
  .then(cred=>{
    return db.collection("students").doc(cred.user.uid).set({
      fullName:"‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÉ‡∏´‡∏°‡πà",
      studentId:studentId.value,
      score:80,
      grade:"B"
    })
  }).then(()=>{
    alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    showLogin();
  }).catch(()=>alert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÑ‡∏î‡πâ"));
}

// DASHBOARD
function loadDashboard(){
  document.getElementById("loginPage").style.display="none";
  document.getElementById("dashboard").style.display="block";

  const uid = auth.currentUser.uid;
  db.collection("students").doc(uid).get().then(doc=>{
    const d = doc.data();
    nameShow.innerText = d.fullName;
    sidShow.innerText = d.studentId;
    scoreShow.innerText = d.score;
    gradeShow.innerText = d.grade;
  });
}

// CHECK IN/OUT
function checkIn(){
  db.collection("students").doc(auth.currentUser.uid)
  .update({checkIn:new Date()});
  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß");
}
function checkOut(){
  db.collection("students").doc(auth.currentUser.uid)
  .update({checkOut:new Date()});
  alert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
}

function logout(){
  auth.signOut();
  location.reload();
}
</script>

</body>
</html>
